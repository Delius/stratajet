class Reader < ActiveRecord::Base

  validates :textinput, length: { minimum: 100 }
  REGEX = /(AERODROME HOURS OF OPS\/SERVICE)(\r?\n?\s?:?)(\w+\-?\w+)(\s\d{1,4}-\d{1,4})(\s\w+\-?\w+)(\r?\n?\s?:?)(\d{1,4}-\d{1,4})(\r?\n?\s?:?)(\w+\-?\w+)(\r?\n?\s?:?)(\d{1,4}-\d{1,4})(\sF?R?I?)(\s?\d?\d?\d?\d?-?\d?\d?\d?\d?,?\s?\d?\d?\d?\d?-?\d?\d?\d?\d?)(\D\D\D\r?\n?)(\r?\n?\s?:?)(\w+\-?\w+)(\r?\n?\s?:?,?\s?)(\d?\d?\d?\d?-?\d?\d?\d?\d?)(\s?\D?\D?\D?)(\s?\D?\D?\D?\D?\D?\D?\d?\d?\d?\d?-?\d?\d?\d?\d?)([^.*?]*?)(CREATED)/

  def shows
    string = textinput
    list=[]
    string.scan(REGEX) {#list << ('(d3) '+ $3)+(' (Nr4) '+$4)+('( d5 )'+$5)+('(7nr) '+$7)+('( d9 ) '+$9)+(' (11)'+$11)+('(12) '+$12)+('(13) '+$13)+('(14) '+$14)+('(14) '+$14)+('(16) '+$16)+('(17) '+$17)+('(18) '+$18)+('(19) '+$19)+(' (20) '+$20)+(' (21) '+$21)
      if $3 == 'MON-WED' && $5 == ' THU' && $9 == 'FRI' && $14 == 'SAT' && $19 == ' SUN'
        list << (' '+$4)+(' '+$4)+(' '+$7)+(' '+$11)+(' '+$16)+(' '+$18)+(' '+$20)
      elsif $3 == 'MON' && $5 == ' TUE-THU' && $9 == 'FRI' && $14 == 'SAT' && $19 == ' SUN'
        list << (' '+$4)+(' '+$7)+(' '+$7)+(' '+$7)+(' '+$16)+(' '+$18)+(' '+$20)
      elsif $3 == 'MON' && $5 == ' TUE' && $9 == 'WED-THU'&& $12 == " FRI" && $14 == "SAT\r\n" && $19 == 'SUN'
        list << (' '+$4)+(' '+$7)+(' '+$11)+(' '+$11)+(' '+$13)+(' '+$15)+(' '+$16)+(' '+$20)
      elsif $3 == 'MON-WED' && $5 == ' THU'&& $9 == 'FRI'&& $14 == "SAT"  && $19 == 'SUN'
        list << (' '+$4)+(' '+$4)+(' '+$4)+(' '+$7)+(' '+$11)+(' '+$16)+(' '+$20)
      elsif $3 == 'MON' && $5 == ' TUE-WED' && $9 == 'THU' && $12 == " FRI" && $14 == "SAT" && $19 == 'SUN'
        list << (' '+$4)+(' '+$7)+(' '+$7)+(' '+$11)+(' '+$13)+(' '+$16)+(' '+$20)
      elsif $3 == 'MON-TUE' && $5 == ' WED-THU' && $9 == 'FRI'  && $14 == "SAT" && $19 == 'SUN'
        list << (' '+$4)+(' '+$4)+(' '+$7)+(' '+$7)+(' '+$13)+(' '+$16)+(' '+$20)
      else
    end
    }
    list
  end
end